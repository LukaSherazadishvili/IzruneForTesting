// This file has been autogenerated from a class added in the UI designer.

using System;

using Foundation;
using UIKit;
using MpdcViewExtentions;
using System.Linq;
using Izrune.iOS.Utils;

namespace Izrune.iOS
{
	public partial class EditProfileViewController : UIViewController
	{
		public EditProfileViewController (IntPtr handle) : base (handle)
		{
		}

        public static readonly NSString StoryboardId = new NSString("EditProfileStoryboardId");
        private EditParentProfileViewController editParentVc;
        private EditStudentProfileViewController editStudentVc;
        private ChangePasswordViewController changePasswordVc;

        public override void ViewDidLoad()
        {
            base.ViewDidLoad();

            InitViewControllers();

            this.NavigationItem.BackBarButtonItem = new UIBarButtonItem("", UIBarButtonItemStyle.Plain, null);

            View.LayoutIfNeeded();

            InitUI();

            InitGestures();
        }

        private void InitUI()
        {
        
            initView(parentView, parentShadow);
            initView(studentView, studentShadow);
            initView(passowrdView, passwordShadow);

            addStudentBtn.Layer.CornerRadius = 25;
        }

        private void initView(UIView view, UIView viewForShadow)
        {
            view.Layer.BorderWidth = 3;
            view.Layer.BorderColor = UIColor.White.CGColor;
            view.Layer.CornerRadius = 25;
            view.ApplyGradient(AppColors.PurpleGradient);

            viewForShadow.AddShadowToView(10, 25, 0.8f, AppColors.TitleColor);
        }

        private void InitViewControllers()
        {
            editParentVc = Storyboard.InstantiateViewController(EditParentProfileViewController.StoryboardId) as EditParentProfileViewController;
            editStudentVc = Storyboard.InstantiateViewController(EditStudentProfileViewController.StoryboardId) as EditStudentProfileViewController;
            changePasswordVc = Storyboard.InstantiateViewController(ChangePasswordViewController.StoryboardId) as ChangePasswordViewController;
        }

        private void InitGestures()
        {
            if(parentView.GestureRecognizers == null || parentView.GestureRecognizers?.Length == 0)
            {
                parentView.AddGestureRecognizer(new UITapGestureRecognizer(() => {
                    this.NavigationController.PushViewController(editParentVc, true);
                }));
            }

            if (studentView.GestureRecognizers == null || studentView.GestureRecognizers?.Length == 0)
            {
                studentView.AddGestureRecognizer(new UITapGestureRecognizer(() => {
                    this.NavigationController.PushViewController(editParentVc, true);
                }));
            }

            if (passowrdView.GestureRecognizers == null || passowrdView.GestureRecognizers?.Length == 0)
            {
                passowrdView.AddGestureRecognizer(new UITapGestureRecognizer(() => {
                    this.NavigationController.PushViewController(changePasswordVc, true);
                }));
            }

            addStudentBtn.TouchUpInside += delegate {

                var studentRegVc = Storyboard.InstantiateViewController(StudentRegistrationViewController.StoryboardId) as StudentRegistrationViewController;

                this.NavigationController.PushViewController(studentRegVc, true);
            };
        }
    }
}
