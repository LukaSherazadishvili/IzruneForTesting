// This file has been autogenerated from a class added in the UI designer.

using System;

using Foundation;
using Izrune.iOS.Utils;
using MpdcViewExtentions;
using UIKit;

namespace Izrune.iOS
{
	public partial class ParentRegistrationViewController : UIViewController
	{
		public ParentRegistrationViewController (IntPtr handle) : base (handle)
		{
		}

        public static readonly NSString StoryboardId = new NSString("ParentRegistrationStoryboardId");

        UIViewController[] RegistrationPages;

        private bool isFirstPage = true;
        private ParentRegiFirstViewController parentRegVc;
        private ParentRegSecondViewController parent2RegVc;

        public override void ViewDidLoad()
        {
            base.ViewDidLoad();

            //var parentRegVc = Storyboard.InstantiateViewController(ParentRegSecondViewController.StoryboardId) as ParentRegSecondViewController;

            //var parent2RegVc = Storyboard.InstantiateViewController(ParentRegiFirstViewController.StoryboardId) as ParentRegiFirstViewController;



            InitUI();

            InitGestures();
        }

        public override void ViewDidLayoutSubviews()
        {
            base.ViewDidLayoutSubviews();

            //RegistrationPages?[0].AddAsChildViewController(this, viewForPager);
            parentRegVc = Storyboard.InstantiateViewController(ParentRegiFirstViewController.StoryboardId) as ParentRegiFirstViewController;

            parent2RegVc = Storyboard.InstantiateViewController(ParentRegSecondViewController.StoryboardId) as ParentRegSecondViewController;

            RegistrationPages = new UIViewController[] { parentRegVc, parent2RegVc };

            this.AddChildViewController(parentRegVc);

            parentRegVc.View.Frame = new CoreGraphics.CGRect(0, 0, viewForPager.Frame.Width, viewForPager.Frame.Height);

            viewForPager.AddSubview(parentRegVc.View);

            parentRegVc.DidMoveToParentViewController(this);
        }

        private void InitGestures()
        {
            nextBtn.TouchUpInside += delegate {
                isFirstPage = false;
                CheckIndex();
                this.AddChildViewController(parentRegVc);

                parentRegVc.View.Frame = new CoreGraphics.CGRect(0, 0, viewForPager.Frame.Width, viewForPager.Frame.Height);

                viewForPager.AddSubview(parentRegVc.View);

                parentRegVc.DidMoveToParentViewController(this);
            };

            prewBtn.TouchUpInside += delegate {
                isFirstPage = true;
                CheckIndex();
                parent2RegVc.WillMoveToParentViewController(this);
                parent2RegVc.View.RemoveFromSuperview();
                parent2RegVc.RemoveFromParentViewController();
            };
        }

        private void InitUI()
        {
            nextBtn.Layer.CornerRadius = 25;
            prewBtn.Layer.CornerRadius = 25;

            nextBtn.AddShadowToView(5, 25, 0.8f, AppColors.TitleColor);

            //userNameTextField.MakeRoundedTextField(20.0f, AppColors.TextFieldBackground, 17);

        }

        private void CheckIndex()
        {
            nextBtn.Enabled = isFirstPage;
            prewBtn.Enabled = !isFirstPage;
        }
    }
}
