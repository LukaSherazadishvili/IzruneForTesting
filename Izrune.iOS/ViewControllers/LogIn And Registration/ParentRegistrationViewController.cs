// This file has been autogenerated from a class added in the UI designer.

using System;
using System.Linq;
using Foundation;
using Izrune.iOS.Utils;
using MpdcViewExtentions;
using UIKit;

namespace Izrune.iOS
{
	public partial class ParentRegistrationViewController : UIViewController
	{
		public ParentRegistrationViewController (IntPtr handle) : base (handle)
		{
		}

        public static readonly NSString StoryboardId = new NSString("ParentRegistrationStoryboardId");

        UIViewController[] RegistrationPages;

        private bool isFirstPage = true;
        private ParentRegiFirstViewController parentRegVc;
        private ParentRegSecondViewController parent2RegVc;

        private int CurrentIndex;

        public override void ViewDidLoad()
        {
            base.ViewDidLoad();

            parentRegVc = Storyboard.InstantiateViewController(ParentRegiFirstViewController.StoryboardId) as ParentRegiFirstViewController;

            parent2RegVc = Storyboard.InstantiateViewController(ParentRegSecondViewController.StoryboardId) as ParentRegSecondViewController;


            this.AddVcInView(viewForPager, parentRegVc);

            InitUI();

            InitGestures();
        }

        private void InitGestures()
        {
            nextBtn.TouchUpInside += delegate
            {
                CurrentIndex++;
                isFirstPage = false;
                CheckIndex();
                AddSecondVc();
            };

            prewBtn.TouchUpInside += delegate {
                isFirstPage = true;
                CheckIndex();
                AddFirstVc();
            };
        }

        private void AddSecondVc()
        {
            parentRegVc.WillMoveToParentViewController(this);
            parentRegVc.View.RemoveFromSuperview();
            parentRegVc.RemoveFromParentViewController();

            this.AddVcInView(viewForPager, parent2RegVc);
        }

        private void AddFirstVc()
        {
            parent2RegVc.WillMoveToParentViewController(this);
            parent2RegVc.View.RemoveFromSuperview();
            parent2RegVc.RemoveFromParentViewController();

            this.AddVcInView(viewForPager, parentRegVc);
        }

        private void InitUI()
        {
            nextBtn.Layer.CornerRadius = 25;
            prewBtn.Layer.CornerRadius = 25;

            nextBtn.AddShadowToView(5, 25, 0.8f, AppColors.TitleColor);
        }

        private void CheckIndex()
        {
            nextBtn.Enabled = isFirstPage;
            prewBtn.Enabled = !isFirstPage;
        }



    }
}
