// This file has been autogenerated from a class added in the UI designer.

using System;
using System.Linq;
using Foundation;
using Izrune.iOS.Utils;
using UIKit;

namespace Izrune.iOS
{
	public partial class LogInViewController : UIViewController
	{
		public LogInViewController (IntPtr handle) : base (handle)
		{
		}

        public static readonly NSString StoryboardId = new NSString("LogInViewControllerStoryboardId");

        public override void ViewDidLoad()
        {
            base.ViewDidLoad();

            InitUI();

            InitGestures();

            ChcekTextField(userNameTextField, false);
            ChcekTextField(passwordTextField, true);
        }

        private void InitGestures()
        {
            if(loginView.GestureRecognizers == null || loginView.GestureRecognizers?.Count() == 0)
            {
                loginView.AddGestureRecognizer(new UITapGestureRecognizer(() =>
                {
                    //TODO
                    var alert = UIAlertController.Create("Attention", "LoginClicked", UIAlertControllerStyle.Alert);
                    alert.AddAction(UIAlertAction.Create("Ok", UIAlertActionStyle.Default, null));
                    alert.AddAction(UIAlertAction.Create("Cancel", UIAlertActionStyle.Cancel, null));
                    this.PresentViewController(alert, true, null);
                }));
            }

            if (registrationView.GestureRecognizers == null || registrationView.GestureRecognizers?.Count() == 0)
            {
                registrationView.AddGestureRecognizer(new UITapGestureRecognizer(() =>
                {
                    //TODO
                    var alert = UIAlertController.Create("Attention", "RegistrationClicked", UIAlertControllerStyle.Alert);
                    alert.AddAction(UIAlertAction.Create("Ok", UIAlertActionStyle.Default, null));
                    alert.AddAction(UIAlertAction.Create("Cancel", UIAlertActionStyle.Cancel, null));
                    this.PresentViewController(alert, true, null);
                }));
            }

            if (showPasswordIcon.GestureRecognizers == null || showPasswordIcon.GestureRecognizers?.Count() == 0)
            {
                showPasswordIcon.AddGestureRecognizer(new UITapGestureRecognizer(() =>
                {
                    //TODO
                    passwordTextField.SecureTextEntry = !passwordTextField.SecureTextEntry;
                }));
            }
        }

        private void InitUI()
        {
            loginView.Layer.CornerRadius = 25;
            registrationView.Layer.CornerRadius = 25;

            //userNameTextField.Layer.CornerRadius = 20;
            //passwordTextField.Layer.CornerRadius = 20;

            loginView.BackgroundColor = AppColors.Succesful;
            registrationView.BackgroundColor = AppColors.Tint;

            //var attr = new UIStringAttributes()
            //{
            //    ForegroundColor = AppColors.PlaceHolder,
            //    Font = UIFont.FromName("BPG Mrgvlovani 2010", 14)
            //};

            //userNameTextField.AttributedPlaceholder = new NSAttributedString("სახელი", attr);
        }

        private void ChcekTextField (UITextField textField, bool isCorrect)
        {
            textField.Layer.BorderWidth = 2;
            textField.Layer.BorderColor = isCorrect ? AppColors.Succesful.CGColor : AppColors.ErrorTitle.CGColor;
        }
    }
}
